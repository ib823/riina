(* Copyright (c) 2026 The RIINA Authors. All rights reserved. *)

(*
 * RIINA CoreBanking - Isabelle/HOL Port
 *
 * Auto-generated port of 02_FORMAL/coq/domains/CoreBanking.v (31 theorems).
 *
 * Generated by scripts/generate-multiprover.py
 *
 * Correspondence Table:
 *
 * | Coq Definition     | Isabelle Definition    | Status |
 * |--------------------|------------------------|--------|
 * | AccountType        | account_type           | OK     |
 * | PaymentStatus      | payment_status         | OK     |
 * | TransactionType    | transaction_type       | OK     |
 * | Customer           | customer               | OK     |
 * | BeneficialOwner    | beneficial_owner       | OK     |
 * | TransactionParty   | transaction_party      | OK     |
 * | Account            | account                | OK     |
 * | JournalEntry       | journal_entry          | OK     |
 * | InterestCalculation | interest_calculation   | OK     |
 * | TermDepositContract | term_deposit_contract  | OK     |
 * | Loan               | loan                   | OK     |
 * | Installment        | installment            | OK     |
 * | AmortizationSchedule | amortization_schedule  | OK     |
 * | Covenant           | covenant               | OK     |
 * | CreditFacility     | credit_facility        | OK     |
 * | Payment            | payment                | OK     |
 * | NostroAccount      | nostro_account         | OK     |
 * | SwiftMessage       | swift_message          | OK     |
 * | FxSpotTrade        | fx_spot_trade          | OK     |
 * | RepoTransaction    | repo_transaction       | OK     |
 * | BondPosition       | bond_position          | OK     |
 * | InterestRateSwap   | interest_rate_swap     | OK     |
 * | CollateralPosition | collateral_position    | OK     |
 * | Murabaha           | murabaha               | OK     |
 * | Ijarah             | ijarah                 | OK     |
 * | MusharakahPartner  | musharakah_partner     | OK     |
 * | Musharakah         | musharakah             | OK     |
 * | Sukuk              | sukuk                  | OK     |
 * | ShariahTransaction | shariah_transaction    | OK     |
 * | kyc_complete       | kyc_complete           | OK     |
 * | total_ownership    | total_ownership        | OK     |
 * | complete_ownership | complete_ownership     | OK     |
 * | all_parties_screened | all_parties_screened   | OK     |
 * | well_formed_savings | well_formed_savings    | OK     |
 * | should_be_dormant  | should_be_dormant      | OK     |
 * | dormancy_consistent | dormancy_consistent    | OK     |
 * | debits             | debits                 | OK     |
 * | credits            | credits                | OK     |
 * | valid_entry        | valid_entry            | OK     |
 * | valid_entries      | valid_entries          | OK     |
 * | interest_formula   | interest_formula       | OK     |
 * | precise_interest   | precise_interest       | OK     |
 * | early_withdrawal   | early_withdrawal       | OK     |
 * | penalty_enforced   | penalty_enforced       | OK     |
 * | within_eligibility | within_eligibility     | OK     |
 * | sufficient_collateral | sufficient_collateral  | OK     |
 * | installment_total  | installment_total      | OK     |
 * | sum_installment_principals | sum_installment_principals | OK     |
 * | sum_installment_interest | sum_installment_interest | OK     |
 * | amortization_correct | amortization_correct   | OK     |
 * | covenant_monitoring_correct | covenant_monitoring_correct | OK     |
 * | within_facility_limit | within_facility_limit  | OK     |
 * | payment_within_sla | payment_within_sla     | OK     |
 * | payment_irrevocable | payment_irrevocable    | OK     |
 * | nostro_balanced    | nostro_balanced        | OK     |
 * | swift_validation_enforced | swift_validation_enforced | OK     |
 * | spot_t_plus_2      | spot_t_plus_2          | OK     |
 * | spot_settlement_correct | spot_settlement_correct | OK     |
 * | repo_haircut_applied | repo_haircut_applied   | OK     |
 * | bond_accrued_formula | bond_accrued_formula   | OK     |
 * | accrued_interest_correct | accrued_interest_correct | OK     |
 * | irs_npv_formula    | irs_npv_formula        | OK     |
 * | irs_valuation_correct | irs_valuation_correct  | OK     |
 * | mtm_beyond_threshold | mtm_beyond_threshold   | OK     |
 * | collateral_call_correct | collateral_call_correct | OK     |
 * | murabaha_selling_price | murabaha_selling_price | OK     |
 * | during_tenure      | during_tenure          | OK     |
 * | bank_retains_ownership | bank_retains_ownership | OK     |
 * | partner_profit_share | partner_profit_share   | OK     |
 * | partner_loss_share | partner_loss_share     | OK     |
 * | profit_by_ratio_loss_by_capital | profit_by_ratio_loss_by_capital | OK     |
 * | sukuk_backed_by_assets | sukuk_backed_by_assets | OK     |
 * | no_riba            | no_riba                | OK     |
 * | BANK_001_01_customer_identity_uniqueness | BANK_001_01_customer_identity_uniqueness | OK     |
 * | BANK_001_02_kyc_completeness | BANK_001_02_kyc_completeness | OK     |
 * | BANK_001_03_beneficial_ownership_complete | BANK_001_03_beneficial_ownership_complete | OK     |
 * | BANK_001_04_sanctions_check_mandatory | BANK_001_04_sanctions_check_mandatory | OK     |
 * | BANK_001_05_pep_enhanced_monitoring | BANK_001_05_pep_enhanced_monitoring | OK     |
 * | BANK_001_06_balance_non_negative | BANK_001_06_balance_non_negative | OK     |
 * | BANK_001_07_interest_calculation_precise | BANK_001_07_interest_calculation_precise | OK     |
 * | fold_left_add_acc_general | fold_left_add_acc_general | OK     |
 * | BANK_001_08_double_entry_invariant | BANK_001_08_double_entry_invariant | OK     |
 * | BANK_001_09_term_deposit_lock | BANK_001_09_term_deposit_lock | OK     |
 * | BANK_001_10_dormancy_detection | BANK_001_10_dormancy_detection | OK     |
 * | BANK_001_11_loan_within_eligibility | BANK_001_11_loan_within_eligibility | OK     |
 * | BANK_001_12_collateral_coverage | BANK_001_12_collateral_coverage | OK     |
 * | BANK_001_13_amortization_correctness | BANK_001_13_amortization_correctness | OK     |
 * | BANK_001_14_covenant_monitoring | BANK_001_14_covenant_monitoring | OK     |
 * | BANK_001_15_facility_limit_enforcement | BANK_001_15_facility_limit_enforcement | OK     |
 * | BANK_001_16_instant_payment_completion | BANK_001_16_instant_payment_completion | OK     |
 * | BANK_001_17_payment_irrevocability | BANK_001_17_payment_irrevocability | OK     |
 * | BANK_001_18_idempotency | BANK_001_18_idempotency | OK     |
 * | BANK_001_19_nostro_reconciliation | BANK_001_19_nostro_reconciliation | OK     |
 * | BANK_001_20_swift_message_validation | BANK_001_20_swift_message_validation | OK     |
 * | BANK_001_21_fx_spot_settlement | BANK_001_21_fx_spot_settlement | OK     |
 * | BANK_001_22_repo_collateral_haircut | BANK_001_22_repo_collateral_haircut | OK     |
 * | BANK_001_23_bond_accrued_interest | BANK_001_23_bond_accrued_interest | OK     |
 * | BANK_001_24_derivative_valuation | BANK_001_24_derivative_valuation | OK     |
 * | BANK_001_25_collateral_call_trigger | BANK_001_25_collateral_call_trigger | OK     |
 * | BANK_001_26_murabaha_cost_plus | BANK_001_26_murabaha_cost_plus | OK     |
 * | BANK_001_27_ijarah_ownership | BANK_001_27_ijarah_ownership | OK     |
 * | BANK_001_28_musharakah_profit_loss | BANK_001_28_musharakah_profit_loss | OK     |
 * | BANK_001_29_sukuk_asset_backing | BANK_001_29_sukuk_asset_backing | OK     |
 * | BANK_001_30_shariah_no_riba | BANK_001_30_shariah_no_riba | OK     |
 *)

theory CoreBanking
  imports Main
begin

(* AccountType (matches Coq: Inductive AccountType) *)
datatype account_type =
    Savings
  |     Current
  |     TermDeposit

(* PaymentStatus (matches Coq: Inductive PaymentStatus) *)
datatype payment_status =
    Pending
  |     Completed
  |     Failed

(* TransactionType (matches Coq: Inductive TransactionType) *)
datatype transaction_type =
    InterestBased
  |     ProfitSharing
  |     AssetBacked
  |     ServiceFee

(* Customer (matches Coq: Record Customer) *)
record customer =
  customer_id :: CustomerId
  kyc_verified :: bool
  address_verified :: bool
  risk_assessed :: bool
  pep_screened :: bool
  sanctions_screened :: bool
  is_pep :: bool
  enhanced_due_diligence :: bool
  is_onboarded :: bool

(* BeneficialOwner (matches Coq: Record BeneficialOwner) *)
record beneficial_owner =
  bo_id :: nat
  ownership_percentage :: Z

(* TransactionParty (matches Coq: Record TransactionParty) *)
record transaction_party =
  party_id :: nat
  party_screened :: bool

(* Account (matches Coq: Record Account) *)
record account =
  account_id :: nat
  account_type :: AccountType
  balance :: Z
  owner :: CustomerId
  is_dormant :: bool
  last_activity_days :: nat
  dormancy_threshold :: nat

(* JournalEntry (matches Coq: Record JournalEntry) *)
record journal_entry =
  debit_account :: nat
  credit_account :: nat
  debit_amount :: Z
  credit_amount :: Z
  timestamp :: nat

(* InterestCalculation (matches Coq: Record InterestCalculation) *)
record interest_calculation =
  ic_principal :: Z
  ic_rate_bps :: Z  (* Rate in basis points *)
  ic_days :: Z
  ic_year_days :: Z  (* 360 or 365 *)
  ic_calculated_interest :: Z

(* TermDepositContract (matches Coq: Record TermDepositContract) *)
record term_deposit_contract =
  td_principal :: Z
  td_maturity_days :: nat
  td_withdrawal_day :: nat
  td_penalty_applied :: bool

(* Loan (matches Coq: Record Loan) *)
record loan =
  loan_id :: nat
  borrower :: CustomerId
  principal :: Z
  approved_amount :: Z
  eligibility_limit :: Z
  collateral_value :: Z
  required_coverage :: Z  (* In basis points, e.g., 12000 = 120% *)
  ltv_ratio :: Z
  is_secured :: bool

(* Installment (matches Coq: Record Installment) *)
record installment =
  inst_principal :: Z
  inst_interest :: Z

(* AmortizationSchedule (matches Coq: Record AmortizationSchedule) *)
record amortization_schedule =
  amort_principal :: Z
  amort_total_interest :: Z
  amort_installments :: 'a list

(* Covenant (matches Coq: Record Covenant) *)
record covenant =
  covenant_threshold :: Z
  covenant_actual :: Z
  covenant_breached :: bool
  event_of_default :: bool

(* CreditFacility (matches Coq: Record CreditFacility) *)
record credit_facility =
  facility_limit :: Z
  total_drawdown :: Z
  current_drawdown_request :: Z

(* Payment (matches Coq: Record Payment) *)
record payment =
  payment_id :: nat
  payment_amount :: Z
  status :: PaymentStatus
  idempotency_key :: nat
  processing_time_ms :: nat
  sla_limit_ms :: nat

(* NostroAccount (matches Coq: Record NostroAccount) *)
record nostro_account =
  internal_balance :: Z
  external_balance :: Z
  is_reconciled :: bool

(* SwiftMessage (matches Coq: Record SwiftMessage) *)
record swift_message =
  message_type :: nat
  sender_bic :: nat
  receiver_bic :: nat
  is_schema_valid :: bool

(* FxSpotTrade (matches Coq: Record FxSpotTrade) *)
record fx_spot_trade =
  trade_date :: nat
  settlement_date :: nat
  fx_settled :: bool

(* RepoTransaction (matches Coq: Record RepoTransaction) *)
record repo_transaction =
  collateral_market_value :: Z
  haircut_bps :: Z  (* Basis points *)
  repo_cash_amount :: Z

(* BondPosition (matches Coq: Record BondPosition) *)
record bond_position =
  face_value :: Z
  coupon_rate_bps :: Z
  days_since_coupon :: Z
  coupon_period_days :: Z
  calculated_accrued :: Z

(* InterestRateSwap (matches Coq: Record InterestRateSwap) *)
record interest_rate_swap =
  fixed_leg_pv :: Z
  float_leg_pv :: Z
  calculated_npv :: Z

(* CollateralPosition (matches Coq: Record CollateralPosition) *)
record collateral_position =
  initial_margin :: Z
  current_mtm :: Z
  threshold :: Z
  margin_call_triggered :: bool

(* Murabaha (matches Coq: Record Murabaha) *)
record murabaha =
  murabaha_cost :: Z
  murabaha_profit :: Z
  profit_disclosed :: bool

(* Ijarah (matches Coq: Record Ijarah) *)
record ijarah =
  asset_id :: nat
  bank_owns_asset :: bool
  lease_tenure_months :: nat
  current_month :: nat

(* MusharakahPartner (matches Coq: Record MusharakahPartner) *)
record musharakah_partner =
  partner_id :: nat
  capital_contribution :: Z
  profit_ratio_bps :: Z

(* Musharakah (matches Coq: Record Musharakah) *)
record musharakah =
  partners :: 'a list
  total_profit :: Z
  total_loss :: Z
  total_capital :: Z

(* Sukuk (matches Coq: Record Sukuk) *)
record sukuk =
  sukuk_id :: nat
  sukuk_value :: Z
  underlying_asset_value :: Z
  is_asset_backed :: bool

(* ShariahTransaction (matches Coq: Record ShariahTransaction) *)
record shariah_transaction =
  txn_id :: nat
  txn_type :: TransactionType
  shariah_compliant :: bool

(* kyc_complete (matches Coq: Definition kyc_complete) *)
definition kyc_complete :: "Customer \<Rightarrow> bool" where
  "kyc_complete c \<equiv> kyc_verified c = true /\ address_verified c = true /\
  risk_assessed c = true /\ pep_screened c = true /\
  sanctions_screened c = true"

(* total_ownership (matches Coq: Definition total_ownership) *)
definition total_ownership :: "Z" where
  "total_ownership \<equiv> fold_left (fun acc o => acc + ownership_percentage o) owners 0"

(* complete_ownership (matches Coq: Definition complete_ownership) *)
definition complete_ownership :: "bool" where
  "complete_ownership \<equiv> total_ownership owners = 100"

(* all_parties_screened (matches Coq: Definition all_parties_screened) *)
definition all_parties_screened :: "bool" where
  "all_parties_screened \<equiv> forall p, In p parties -> party_screened p = true"

(* well_formed_savings (matches Coq: Definition well_formed_savings) *)
definition well_formed_savings :: "Account \<Rightarrow> bool" where
  "well_formed_savings a \<equiv> account_type a = Savings -> balance a >= 0"

(* should_be_dormant (matches Coq: Definition should_be_dormant) *)
definition should_be_dormant :: "Account \<Rightarrow> bool" where
  "should_be_dormant a \<equiv> (last_activity_days a > dormancy_threshold a)%nat"

(* dormancy_consistent (matches Coq: Definition dormancy_consistent) *)
definition dormancy_consistent :: "Account \<Rightarrow> bool" where
  "dormancy_consistent a \<equiv> should_be_dormant a -> is_dormant a = true"

(* debits (matches Coq: Definition debits) *)
definition debits :: "Z" where
  "debits \<equiv> fold_left (fun acc e => acc + debit_amount e) entries 0"

(* credits (matches Coq: Definition credits) *)
definition credits :: "Z" where
  "credits \<equiv> fold_left (fun acc e => acc + credit_amount e) entries 0"

(* valid_entry (matches Coq: Definition valid_entry) *)
definition valid_entry :: "JournalEntry \<Rightarrow> bool" where
  "valid_entry e \<equiv> debit_amount e = credit_amount e /\ debit_amount e > 0"

(* valid_entries (matches Coq: Definition valid_entries) *)
definition valid_entries :: "bool" where
  "valid_entries \<equiv> forall e, In e entries -> valid_entry e"

(* interest_formula (matches Coq: Definition interest_formula) *)
definition interest_formula :: "InterestCalculation \<Rightarrow> Z" where
  "interest_formula ic \<equiv> (ic_principal ic * ic_rate_bps ic * ic_days ic) / (ic_year_days ic * 10000)"

(* precise_interest (matches Coq: Definition precise_interest) *)
definition precise_interest :: "InterestCalculation \<Rightarrow> bool" where
  "precise_interest ic \<equiv> ic_year_days ic > 0 /\
  ic_calculated_interest ic = interest_formula ic"

(* early_withdrawal (matches Coq: Definition early_withdrawal) *)
definition early_withdrawal :: "TermDepositContract \<Rightarrow> bool" where
  "early_withdrawal td \<equiv> (td_withdrawal_day td < td_maturity_days td)%nat"

(* penalty_enforced (matches Coq: Definition penalty_enforced) *)
definition penalty_enforced :: "TermDepositContract \<Rightarrow> bool" where
  "penalty_enforced td \<equiv> early_withdrawal td -> td_penalty_applied td = true"

(* within_eligibility (matches Coq: Definition within_eligibility) *)
definition within_eligibility :: "Loan \<Rightarrow> bool" where
  "within_eligibility l \<equiv> approved_amount l <= eligibility_limit l"

(* sufficient_collateral (matches Coq: Definition sufficient_collateral) *)
definition sufficient_collateral :: "Loan \<Rightarrow> bool" where
  "sufficient_collateral l \<equiv> is_secured l = true ->
  collateral_value l * 10000 >= principal l * required_coverage l"

(* installment_total (matches Coq: Definition installment_total) *)
definition installment_total :: "Installment \<Rightarrow> Z" where
  "installment_total i \<equiv> inst_principal i + inst_interest i"

(* sum_installment_principals (matches Coq: Definition sum_installment_principals) *)
definition sum_installment_principals :: "Z" where
  "sum_installment_principals \<equiv> fold_left (fun acc i => acc + inst_principal i) installments 0"

(* sum_installment_interest (matches Coq: Definition sum_installment_interest) *)
definition sum_installment_interest :: "Z" where
  "sum_installment_interest \<equiv> fold_left (fun acc i => acc + inst_interest i) installments 0"

(* amortization_correct (matches Coq: Definition amortization_correct) *)
definition amortization_correct :: "AmortizationSchedule \<Rightarrow> bool" where
  "amortization_correct sched \<equiv> sum_installment_principals (amort_installments sched) = amort_principal sched /\
  sum_installment_interest (amort_installments sched) = amort_total_interest sched"

(* covenant_monitoring_correct (matches Coq: Definition covenant_monitoring_correct) *)
definition covenant_monitoring_correct :: "Covenant \<Rightarrow> bool" where
  "covenant_monitoring_correct cov \<equiv> covenant_breached cov = true -> event_of_default cov = true"

(* within_facility_limit (matches Coq: Definition within_facility_limit) *)
definition within_facility_limit :: "CreditFacility \<Rightarrow> bool" where
  "within_facility_limit cf \<equiv> total_drawdown cf + current_drawdown_request cf <= facility_limit cf"

(* payment_within_sla (matches Coq: Definition payment_within_sla) *)
definition payment_within_sla :: "Payment \<Rightarrow> bool" where
  "payment_within_sla p \<equiv> status p = Completed -> (processing_time_ms p <= sla_limit_ms p)%nat"

(* payment_irrevocable (matches Coq: Definition payment_irrevocable) *)
definition payment_irrevocable :: "Payment \<Rightarrow> bool" where
  "payment_irrevocable p \<equiv> status p = Completed -> True"

(* nostro_balanced (matches Coq: Definition nostro_balanced) *)
definition nostro_balanced :: "NostroAccount \<Rightarrow> bool" where
  "nostro_balanced n \<equiv> is_reconciled n = true -> internal_balance n = external_balance n"

(* swift_validation_enforced (matches Coq: Definition swift_validation_enforced) *)
definition swift_validation_enforced :: "SwiftMessage \<Rightarrow> bool" where
  "swift_validation_enforced msg \<equiv> (sender_bic msg > 0)%nat /\ (receiver_bic msg > 0)%nat -> is_schema_valid msg = true"

(* spot_t_plus_2 (matches Coq: Definition spot_t_plus_2) *)
definition spot_t_plus_2 :: "FxSpotTrade \<Rightarrow> bool" where
  "spot_t_plus_2 trade \<equiv> settlement_date trade = (trade_date trade + 2)%nat"

(* spot_settlement_correct (matches Coq: Definition spot_settlement_correct) *)
definition spot_settlement_correct :: "FxSpotTrade \<Rightarrow> bool" where
  "spot_settlement_correct trade \<equiv> spot_t_plus_2 trade /\ fx_settled trade = true"

(* repo_haircut_applied (matches Coq: Definition repo_haircut_applied) *)
definition repo_haircut_applied :: "RepoTransaction \<Rightarrow> bool" where
  "repo_haircut_applied repo \<equiv> repo_cash_amount repo = 
    collateral_market_value repo * (10000 - haircut_bps repo) / 10000"

(* bond_accrued_formula (matches Coq: Definition bond_accrued_formula) *)
definition bond_accrued_formula :: "BondPosition \<Rightarrow> Z" where
  "bond_accrued_formula bp \<equiv> (face_value bp * coupon_rate_bps bp * days_since_coupon bp) / 
  (coupon_period_days bp * 10000)"

(* accrued_interest_correct (matches Coq: Definition accrued_interest_correct) *)
definition accrued_interest_correct :: "BondPosition \<Rightarrow> bool" where
  "accrued_interest_correct bp \<equiv> coupon_period_days bp > 0 ->
  calculated_accrued bp = bond_accrued_formula bp"

(* irs_npv_formula (matches Coq: Definition irs_npv_formula) *)
definition irs_npv_formula :: "InterestRateSwap \<Rightarrow> Z" where
  "irs_npv_formula irs \<equiv> fixed_leg_pv irs - float_leg_pv irs"

(* irs_valuation_correct (matches Coq: Definition irs_valuation_correct) *)
definition irs_valuation_correct :: "InterestRateSwap \<Rightarrow> bool" where
  "irs_valuation_correct irs \<equiv> calculated_npv irs = irs_npv_formula irs"

(* mtm_beyond_threshold (matches Coq: Definition mtm_beyond_threshold) *)
definition mtm_beyond_threshold :: "CollateralPosition \<Rightarrow> bool" where
  "mtm_beyond_threshold cp \<equiv> Z"

(* collateral_call_correct (matches Coq: Definition collateral_call_correct) *)
definition collateral_call_correct :: "CollateralPosition \<Rightarrow> bool" where
  "collateral_call_correct cp \<equiv> mtm_beyond_threshold cp -> margin_call_triggered cp = true"

(* murabaha_selling_price (matches Coq: Definition murabaha_selling_price) *)
definition murabaha_selling_price :: "Murabaha \<Rightarrow> Z" where
  "murabaha_selling_price m \<equiv> murabaha_cost m + murabaha_profit m"

(* during_tenure (matches Coq: Definition during_tenure) *)
definition during_tenure :: "Ijarah \<Rightarrow> bool" where
  "during_tenure ij \<equiv> (current_month ij <= lease_tenure_months ij)%nat"

(* bank_retains_ownership (matches Coq: Definition bank_retains_ownership) *)
definition bank_retains_ownership :: "Ijarah \<Rightarrow> bool" where
  "bank_retains_ownership ij \<equiv> during_tenure ij -> bank_owns_asset ij = true"

(* partner_profit_share (matches Coq: Definition partner_profit_share) *)
definition partner_profit_share :: "MusharakahPartner \<Rightarrow> Musharakah \<Rightarrow> Z" where
  "partner_profit_share p m \<equiv> (total_profit m * profit_ratio_bps p) / 10000"

(* partner_loss_share (matches Coq: Definition partner_loss_share) *)
definition partner_loss_share :: "MusharakahPartner \<Rightarrow> Musharakah \<Rightarrow> Z" where
  "partner_loss_share p m \<equiv> (total_loss m * capital_contribution p) / total_capital m"

(* profit_by_ratio_loss_by_capital (matches Coq: Definition profit_by_ratio_loss_by_capital) *)
definition profit_by_ratio_loss_by_capital :: "MusharakahPartner \<Rightarrow> Musharakah \<Rightarrow> bool" where
  "profit_by_ratio_loss_by_capital p m \<equiv> total_capital m > 0 ->
  actual_profit_share = partner_profit_share p m /\
  actual_loss_share = partner_loss_share p m"

(* sukuk_backed_by_assets (matches Coq: Definition sukuk_backed_by_assets) *)
definition sukuk_backed_by_assets :: "Sukuk \<Rightarrow> bool" where
  "sukuk_backed_by_assets s \<equiv> is_asset_backed s = true -> underlying_asset_value s >= sukuk_value s"

(* no_riba (matches Coq: Definition no_riba) *)
definition no_riba :: "ShariahTransaction \<Rightarrow> bool" where
  "no_riba st \<equiv> shariah_compliant st = true -> txn_type st <> InterestBased"

(* BANK_001_01_customer_identity_uniqueness (matches Coq) *)
lemma BANK_001_01_customer_identity_uniqueness: "\<forall> (customers : list Customer) (c1 c2 : Customer), unique_customer_ids customers \<longrightarrow> In c1 customers \<longrightarrow> In c2 customers \<longrightarrow> customer_id c1 = customer_id c2 \<longrightarrow> c1 = c2"
  by (cases rule: ‹_›.cases; simp)

(* BANK_001_02_kyc_completeness (matches Coq) *)
lemma BANK_001_02_kyc_completeness: "\<forall> (c : Customer), is_onboarded c = True \<longrightarrow> kyc_verified c = True \<longrightarrow> address_verified c = True \<longrightarrow> risk_assessed c = True \<longrightarrow> pep_screened c = True \<longrightarrow> sanctions_screened c = True \<longrightarrow> kyc_complete c"
  by auto

(* BANK_001_03_beneficial_ownership_complete (matches Coq) *)
lemma BANK_001_03_beneficial_ownership_complete: "\<forall> (owners : list BeneficialOwner), complete_ownership owners \<longrightarrow> total_ownership owners = 100"
  by auto

(* BANK_001_04_sanctions_check_mandatory (matches Coq) *)
lemma BANK_001_04_sanctions_check_mandatory: "\<forall> (parties : list TransactionParty), all_parties_screened parties \<longrightarrow> \<forall> p, In p parties \<longrightarrow> party_screened p = True"
  by auto

(* BANK_001_05_pep_enhanced_monitoring (matches Coq) *)
lemma BANK_001_05_pep_enhanced_monitoring: "\<forall> (c : Customer), is_pep c = True \<longrightarrow> enhanced_due_diligence c = True \<longrightarrow> is_pep c = True \<and> enhanced_due_diligence c = True"
  by auto

(* BANK_001_06_balance_non_negative (matches Coq) *)
lemma BANK_001_06_balance_non_negative: "\<forall> (a : Account), well_formed_savings a \<longrightarrow> account_type a = Savings \<longrightarrow> balance a \<ge> 0"
  by auto

(* BANK_001_07_interest_calculation_precise (matches Coq) *)
lemma BANK_001_07_interest_calculation_precise: "\<forall> (ic : InterestCalculation), precise_interest ic \<longrightarrow> ic_calculated_interest ic = interest_formula ic"
  by auto

(* fold_left_add_acc_general (matches Coq) *)
lemma fold_left_add_acc_general: "\<forall> (A : Type) (f : A \<longrightarrow> Z) (l : list A) (acc : Z), fold_left (fun a x => a + f x) l acc = acc + fold_left (fun a x => a + f x) l 0"
  by simp

(* BANK_001_08_double_entry_invariant (matches Coq) *)
lemma BANK_001_08_double_entry_invariant: "\<forall> (entries : list JournalEntry), valid_entries entries \<longrightarrow> debits entries = credits entries"
  by (cases rule: ‹_›.cases; simp)

(* BANK_001_09_term_deposit_lock (matches Coq) *)
lemma BANK_001_09_term_deposit_lock: "\<forall> (td : TermDepositContract), penalty_enforced td \<longrightarrow> early_withdrawal td \<longrightarrow> td_penalty_applied td = True"
  by auto

(* BANK_001_10_dormancy_detection (matches Coq) *)
lemma BANK_001_10_dormancy_detection: "\<forall> (a : Account), dormancy_consistent a \<longrightarrow> should_be_dormant a \<longrightarrow> is_dormant a = True"
  by auto

(* BANK_001_11_loan_within_eligibility (matches Coq) *)
lemma BANK_001_11_loan_within_eligibility: "\<forall> (l : Loan), within_eligibility l \<longrightarrow> approved_amount l \<le> eligibility_limit l"
  by auto

(* BANK_001_12_collateral_coverage (matches Coq) *)
lemma BANK_001_12_collateral_coverage: "\<forall> (l : Loan), sufficient_collateral l \<longrightarrow> is_secured l = True \<longrightarrow> collateral_value l * 10000 \<ge> principal l * required_coverage l"
  by auto

(* BANK_001_13_amortization_correctness (matches Coq) *)
lemma BANK_001_13_amortization_correctness: "\<forall> (sched : AmortizationSchedule), amortization_correct sched \<longrightarrow> sum_installment_principals (amort_installments sched) = amort_principal sched"
  by auto

(* BANK_001_14_covenant_monitoring (matches Coq) *)
lemma BANK_001_14_covenant_monitoring: "\<forall> (cov : Covenant), covenant_monitoring_correct cov \<longrightarrow> covenant_breached cov = True \<longrightarrow> event_of_default cov = True"
  by auto

(* BANK_001_15_facility_limit_enforcement (matches Coq) *)
lemma BANK_001_15_facility_limit_enforcement: "\<forall> (cf : CreditFacility), within_facility_limit cf \<longrightarrow> total_drawdown cf + current_drawdown_request cf \<le> facility_limit cf"
  by auto

(* BANK_001_16_instant_payment_completion (matches Coq) *)
lemma BANK_001_16_instant_payment_completion: "\<forall> (p : Payment), payment_within_sla p \<longrightarrow> status p = Completed \<longrightarrow> (processing_time_ms p \<le> sla_limit_ms p)%nat"
  by auto

(* BANK_001_17_payment_irrevocability (matches Coq) *)
lemma BANK_001_17_payment_irrevocability: "\<forall> (p : Payment), status p = Completed \<longrightarrow> payment_irrevocable p"
  by auto

(* BANK_001_18_idempotency (matches Coq) *)
lemma BANK_001_18_idempotency: "\<forall> (p1 p2 : Payment) (executed : list Payment), unique_idempotency_keys executed \<longrightarrow> In p1 executed \<longrightarrow> In p2 executed \<longrightarrow> idempotency_key p1 = idempotency_key p2 \<longrightarrow> p1 = p2"
  by (cases rule: ‹_›.cases; simp)

(* BANK_001_19_nostro_reconciliation (matches Coq) *)
lemma BANK_001_19_nostro_reconciliation: "\<forall> (n : NostroAccount), nostro_balanced n \<longrightarrow> is_reconciled n = True \<longrightarrow> internal_balance n = external_balance n"
  by auto

(* BANK_001_20_swift_message_validation (matches Coq) *)
lemma BANK_001_20_swift_message_validation: "\<forall> (msg : SwiftMessage), swift_validation_enforced msg \<longrightarrow> (sender_bic msg > 0)%nat \<longrightarrow> (receiver_bic msg > 0)%nat \<longrightarrow> is_schema_valid msg = True"
  by auto

(* BANK_001_21_fx_spot_settlement (matches Coq) *)
lemma BANK_001_21_fx_spot_settlement: "\<forall> (trade : FxSpotTrade), spot_settlement_correct trade \<longrightarrow> settlement_date trade = (trade_date trade + 2)%nat \<and> fx_settled trade = True"
  by auto

(* BANK_001_22_repo_collateral_haircut (matches Coq) *)
lemma BANK_001_22_repo_collateral_haircut: "\<forall> (repo : RepoTransaction), repo_haircut_applied repo \<longrightarrow> repo_cash_amount repo = collateral_market_value repo * (10000 - haircut_bps repo) / 10000"
  by auto

(* BANK_001_23_bond_accrued_interest (matches Coq) *)
lemma BANK_001_23_bond_accrued_interest: "\<forall> (bp : BondPosition), accrued_interest_correct bp \<longrightarrow> coupon_period_days bp > 0 \<longrightarrow> calculated_accrued bp = bond_accrued_formula bp"
  by auto

(* BANK_001_24_derivative_valuation (matches Coq) *)
lemma BANK_001_24_derivative_valuation: "\<forall> (irs : InterestRateSwap), irs_valuation_correct irs \<longrightarrow> calculated_npv irs = fixed_leg_pv irs - float_leg_pv irs"
  by auto

(* BANK_001_25_collateral_call_trigger (matches Coq) *)
lemma BANK_001_25_collateral_call_trigger: "\<forall> (cp : CollateralPosition), collateral_call_correct cp \<longrightarrow> mtm_beyond_threshold cp \<longrightarrow> margin_call_triggered cp = True"
  by auto

(* BANK_001_26_murabaha_cost_plus (matches Coq) *)
lemma BANK_001_26_murabaha_cost_plus: "\<forall> (m : Murabaha), profit_disclosed m = True \<longrightarrow> murabaha_selling_price m = murabaha_cost m + murabaha_profit m"
  by simp

(* BANK_001_27_ijarah_ownership (matches Coq) *)
lemma BANK_001_27_ijarah_ownership: "\<forall> (ij : Ijarah), bank_retains_ownership ij \<longrightarrow> during_tenure ij \<longrightarrow> bank_owns_asset ij = True"
  by auto

(* BANK_001_28_musharakah_profit_loss (matches Coq) *)
lemma BANK_001_28_musharakah_profit_loss: "\<forall> (p : MusharakahPartner) (m : Musharakah) (actual_profit_share actual_loss_share : Z), profit_by_ratio_loss_by_capital p m actual_profit_share actual_loss_share \<longrightarrow> total_capital m > 0 \<longrightarrow> actual_profit_share = partner_profit_share p m \<and> actual_loss_share = partner_loss_share p m"
  by auto

(* BANK_001_29_sukuk_asset_backing (matches Coq) *)
lemma BANK_001_29_sukuk_asset_backing: "\<forall> (s : Sukuk), sukuk_backed_by_assets s \<longrightarrow> is_asset_backed s = True \<longrightarrow> underlying_asset_value s \<ge> sukuk_value s"
  by auto

(* BANK_001_30_shariah_no_riba (matches Coq) *)
lemma BANK_001_30_shariah_no_riba: "\<forall> (st : ShariahTransaction), no_riba st \<longrightarrow> shariah_compliant st = True \<longrightarrow> txn_type st \<noteq> InterestBased"
  by simp

end
