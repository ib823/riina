---- MODULE RadiationHardening ----
\* Copyright (c) 2026 The RIINA Authors. All rights reserved.
\* Auto-generated from 02_FORMAL/coq/domains/RadiationHardening.v (20 invariants)
\* Generated by scripts/generate-full-stack.py

EXTENDS Naturals, FiniteSets, Sequences

\* SystemMode (matches Coq: Inductive SystemMode)
CONSTANTS NormalMode, SafeMode, RecoveryMode

\* ECCWord (matches Coq: Record ECCWord)
VARIABLES ecc_data, ecc_parity

\* Watchdog (matches Coq: Record Watchdog)
VARIABLES wd_counter, wd_timeout, wd_last_kick

\* Checkpoint (matches Coq: Record Checkpoint)
VARIABLES cp_state, cp_timestamp, cp_valid

\* CFSignature (matches Coq: Record CFSignature)
VARIABLES cfs_expected_next, cfs_current

\* StackFrame (matches Coq: Record StackFrame)
VARIABLES sf_canary, sf_data, sf_expected_canary

\* ScrubState (matches Coq: Record ScrubState)
VARIABLES scrub_last_addr, scrub_errors_found, scrub_errors_corrected

\* NVersionResult (matches Coq: Record NVersionResult)
VARIABLES nvr_results, nvr_agreement_threshold

\* Probability (matches Coq: Record Probability)
VARIABLES prob_num, prob_denom

\* RecoveryMetrics (matches Coq: Record RecoveryMetrics)
VARIABLES rm_mttr, rm_requirement

\* CriticalData (matches Coq: Record CriticalData)
VARIABLES cd_primary, cd_backup1, cd_backup2, cd_checksum

\* Type invariant
TypeOK ==
  /\ ecc_data \in BOOLEAN
  /\ ecc_parity \in BOOLEAN
  /\ wd_counter \in BOOLEAN
  /\ wd_timeout \in BOOLEAN
  /\ wd_last_kick \in BOOLEAN
  /\ cp_state \in BOOLEAN
  /\ cp_timestamp \in BOOLEAN
  /\ cp_valid \in BOOLEAN
  /\ cfs_expected_next \in BOOLEAN
  /\ cfs_current \in BOOLEAN
  /\ sf_canary \in BOOLEAN
  /\ sf_data \in BOOLEAN
  /\ sf_expected_canary \in BOOLEAN
  /\ scrub_last_addr \in BOOLEAN
  /\ scrub_errors_found \in BOOLEAN
  /\ scrub_errors_corrected \in BOOLEAN
  /\ nvr_results \in BOOLEAN
  /\ nvr_agreement_threshold \in BOOLEAN
  /\ prob_num \in BOOLEAN
  /\ prob_denom \in BOOLEAN
  /\ rm_mttr \in BOOLEAN
  /\ rm_requirement \in BOOLEAN
  /\ cd_primary \in BOOLEAN
  /\ cd_backup1 \in BOOLEAN
  /\ cd_backup2 \in BOOLEAN
  /\ cd_checksum \in BOOLEAN

\* Initial state
Init ==
  /\ ecc_data = TRUE
  /\ ecc_parity = TRUE
  /\ wd_counter = TRUE
  /\ wd_timeout = TRUE
  /\ wd_last_kick = TRUE
  /\ cp_state = TRUE
  /\ cp_timestamp = TRUE
  /\ cp_valid = TRUE
  /\ cfs_expected_next = TRUE
  /\ cfs_current = TRUE
  /\ sf_canary = TRUE
  /\ sf_data = TRUE
  /\ sf_expected_canary = TRUE
  /\ scrub_last_addr = TRUE
  /\ scrub_errors_found = TRUE
  /\ scrub_errors_corrected = TRUE
  /\ nvr_results = TRUE
  /\ nvr_agreement_threshold = TRUE
  /\ prob_num = TRUE
  /\ prob_denom = TRUE
  /\ rm_mttr = TRUE
  /\ rm_requirement = TRUE
  /\ cd_primary = TRUE
  /\ cd_backup1 = TRUE
  /\ cd_backup2 = TRUE
  /\ cd_checksum = TRUE

\* flip_bit (matches Coq: Definition flip_bit)
flip_bit(b) == TRUE

\* majority_vote (matches Coq: Definition majority_vote)
majority_vote == TRUE

\* tmr_errors (matches Coq: Definition tmr_errors)
tmr_errors == TRUE

\* ecc_syndrome (matches Coq: Definition ecc_syndrome)
ecc_syndrome(e) == TRUE

\* watchdog_expired (matches Coq: Definition watchdog_expired)
watchdog_expired(wd, current_time) == TRUE

\* cf_valid (matches Coq: Definition cf_valid)
cf_valid(cfs, actual_next) == TRUE

\* canary_valid (matches Coq: Definition canary_valid)
canary_valid(sf) == TRUE

\* mode_eqb (matches Coq: Definition mode_eqb)
mode_eqb == TRUE

\* count_agreements (matches Coq: Definition count_agreements)
count_agreements(value) == TRUE

\* prob_lt (matches Coq: Definition prob_lt)
prob_lt == TRUE

\* recovery_within_bound (matches Coq: Definition recovery_within_bound)
recovery_within_bound(rm) == TRUE

\* cd_consistent (matches Coq: Definition cd_consistent)
cd_consistent(cd) == TRUE

\* cd_recover (matches Coq: Definition cd_recover)
cd_recover(cd) == TRUE

\* scrub_effective (matches Coq: Definition scrub_effective)
scrub_effective(ss) == TRUE

\* seu_response (matches Coq: Definition seu_response)
seu_response(seu_detected, current_mode) == TRUE

\* DOMAIN_001_01 (matches Coq: Theorem DOMAIN_001_01)
THEOREM DOMAIN_001_01 == Init => TypeOK

\* DOMAIN_001_02 (matches Coq: Theorem DOMAIN_001_02)
THEOREM DOMAIN_001_02 == Init => TypeOK

\* DOMAIN_001_03 (matches Coq: Theorem DOMAIN_001_03)
THEOREM DOMAIN_001_03 == Init => TypeOK

\* DOMAIN_001_04 (matches Coq: Theorem DOMAIN_001_04)
THEOREM DOMAIN_001_04 == Init => TypeOK

\* DOMAIN_001_05 (matches Coq: Theorem DOMAIN_001_05)
THEOREM DOMAIN_001_05 == Init => TypeOK

\* DOMAIN_001_06 (matches Coq: Theorem DOMAIN_001_06)
THEOREM DOMAIN_001_06 == Init => TypeOK

\* DOMAIN_001_07 (matches Coq: Theorem DOMAIN_001_07)
THEOREM DOMAIN_001_07 == Init => TypeOK

\* DOMAIN_001_08 (matches Coq: Theorem DOMAIN_001_08)
THEOREM DOMAIN_001_08 == Init => TypeOK

\* DOMAIN_001_09 (matches Coq: Theorem DOMAIN_001_09)
THEOREM DOMAIN_001_09 == Init => TypeOK

\* DOMAIN_001_09_corrupted (matches Coq: Theorem DOMAIN_001_09_corrupted)
THEOREM DOMAIN_001_09_corrupted == Init => TypeOK

\* DOMAIN_001_10 (matches Coq: Theorem DOMAIN_001_10)
THEOREM DOMAIN_001_10 == Init => TypeOK

\* DOMAIN_001_11 (matches Coq: Theorem DOMAIN_001_11)
THEOREM DOMAIN_001_11 == Init => TypeOK

\* DOMAIN_001_12 (matches Coq: Theorem DOMAIN_001_12)
THEOREM DOMAIN_001_12 == Init => TypeOK

\* DOMAIN_001_13 (matches Coq: Theorem DOMAIN_001_13)
THEOREM DOMAIN_001_13 == Init => TypeOK

\* DOMAIN_001_14 (matches Coq: Theorem DOMAIN_001_14)
THEOREM DOMAIN_001_14 == Init => TypeOK

\* DOMAIN_001_15 (matches Coq: Theorem DOMAIN_001_15)
THEOREM DOMAIN_001_15 == Init => TypeOK

\* DOMAIN_001_15_single_corruption (matches Coq: Theorem DOMAIN_001_15_single_corruption)
THEOREM DOMAIN_001_15_single_corruption == Init => TypeOK

\* DOMAIN_001_16 (matches Coq: Theorem DOMAIN_001_16)
THEOREM DOMAIN_001_16 == Init => TypeOK

\* DOMAIN_001_17 (matches Coq: Theorem DOMAIN_001_17)
THEOREM DOMAIN_001_17 == Init => TypeOK

\* DOMAIN_001_18 (matches Coq: Theorem DOMAIN_001_18)
THEOREM DOMAIN_001_18 == Init => TypeOK

\* Next-state relation
Next == UNCHANGED <<ecc_data, ecc_parity, wd_counter, wd_timeout, wd_last_kick, cp_state, cp_timestamp, cp_valid, cfs_expected_next, cfs_current, sf_canary, sf_data, sf_expected_canary, scrub_last_addr, scrub_errors_found, scrub_errors_corrected, nvr_results, nvr_agreement_threshold, prob_num, prob_denom, rm_mttr, rm_requirement, cd_primary, cd_backup1, cd_backup2, cd_checksum>>

\* Specification
Spec == Init /\ [][Next]_<<ecc_data, ecc_parity, wd_counter, wd_timeout, wd_last_kick, cp_state, cp_timestamp, cp_valid, cfs_expected_next, cfs_current, sf_canary, sf_data, sf_expected_canary, scrub_last_addr, scrub_errors_found, scrub_errors_corrected, nvr_results, nvr_agreement_threshold, prob_num, prob_denom, rm_mttr, rm_requirement, cd_primary, cd_backup1, cd_backup2, cd_checksum>>

====
