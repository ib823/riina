---- MODULE CameraAudioSystem ----
\* SPDX-License-Identifier: MPL-2.0
\* Copyright (c) 2026 The RIINA Authors.
\* Auto-generated from 02_FORMAL/coq/domains/mobile_os/CameraAudioSystem.v (21 invariants)
\* Generated by scripts/generate-full-stack.py

EXTENDS Naturals, FiniteSets, Sequences

\* RecordingState (matches Coq: Inductive RecordingState)
CONSTANTS NotRecording, Recording, Paused

\* Scene (matches Coq: Record Scene)
VARIABLES scene_id, scene_data, scene_timestamp

\* RawPhoto (matches Coq: Record RawPhoto)
VARIABLES photo_id, photo_pixels, photo_metadata, photo_timestamp

\* VideoRecording (matches Coq: Record VideoRecording)
VARIABLES video_id, video_frames, video_duration_ms, video_fps

\* AudioSample (matches Coq: Record AudioSample)
VARIABLES audio_id, audio_data, audio_input_time, audio_output_time

\* CameraPermission (matches Coq: Record CameraPermission)
VARIABLES camera_granted, mic_granted, per_session_only

\* AccessIndicator (matches Coq: Record AccessIndicator)
VARIABLES indicator_visible, indicator_persistent, indicator_type

\* AudioConfig (matches Coq: Record AudioConfig)
VARIABLES sample_rate, bit_depth, channels, audio_level

\* VideoConfig (matches Coq: Record VideoConfig)
VARIABLES video_width, video_height, video_frame_rate, stabilization_offset

\* RecordingSession (matches Coq: Record RecordingSession)
VARIABLES rec_state, rec_indicator, rec_background, rec_permission

\* PhotoCapture (matches Coq: Record PhotoCapture)
VARIABLES capture_photo, capture_has_metadata, capture_metadata_stripped, capture_resolution_w, capture_resolution_h

\* Type invariant
TypeOK ==
  /\ scene_id \in BOOLEAN
  /\ scene_data \in BOOLEAN
  /\ scene_timestamp \in BOOLEAN
  /\ photo_id \in BOOLEAN
  /\ photo_pixels \in BOOLEAN
  /\ photo_metadata \in BOOLEAN
  /\ photo_timestamp \in BOOLEAN
  /\ video_id \in BOOLEAN
  /\ video_frames \in BOOLEAN
  /\ video_duration_ms \in BOOLEAN
  /\ video_fps \in BOOLEAN
  /\ audio_id \in BOOLEAN
  /\ audio_data \in BOOLEAN
  /\ audio_input_time \in BOOLEAN
  /\ audio_output_time \in BOOLEAN
  /\ camera_granted \in BOOLEAN
  /\ mic_granted \in BOOLEAN
  /\ per_session_only \in BOOLEAN
  /\ indicator_visible \in BOOLEAN
  /\ indicator_persistent \in BOOLEAN
  /\ indicator_type \in BOOLEAN
  /\ sample_rate \in BOOLEAN
  /\ bit_depth \in BOOLEAN
  /\ channels \in BOOLEAN
  /\ audio_level \in BOOLEAN
  /\ video_width \in BOOLEAN
  /\ video_height \in BOOLEAN
  /\ video_frame_rate \in BOOLEAN
  /\ stabilization_offset \in BOOLEAN
  /\ rec_state \in BOOLEAN
  /\ rec_indicator \in BOOLEAN
  /\ rec_background \in BOOLEAN
  /\ rec_permission \in BOOLEAN
  /\ capture_photo \in BOOLEAN
  /\ capture_has_metadata \in BOOLEAN
  /\ capture_metadata_stripped \in BOOLEAN
  /\ capture_resolution_w \in BOOLEAN
  /\ capture_resolution_h \in BOOLEAN

\* Initial state
Init ==
  /\ scene_id = TRUE
  /\ scene_data = TRUE
  /\ scene_timestamp = TRUE
  /\ photo_id = TRUE
  /\ photo_pixels = TRUE
  /\ photo_metadata = TRUE
  /\ photo_timestamp = TRUE
  /\ video_id = TRUE
  /\ video_frames = TRUE
  /\ video_duration_ms = TRUE
  /\ video_fps = TRUE
  /\ audio_id = TRUE
  /\ audio_data = TRUE
  /\ audio_input_time = TRUE
  /\ audio_output_time = TRUE
  /\ camera_granted = TRUE
  /\ mic_granted = TRUE
  /\ per_session_only = TRUE
  /\ indicator_visible = TRUE
  /\ indicator_persistent = TRUE
  /\ indicator_type = TRUE
  /\ sample_rate = TRUE
  /\ bit_depth = TRUE
  /\ channels = TRUE
  /\ audio_level = TRUE
  /\ video_width = TRUE
  /\ video_height = TRUE
  /\ video_frame_rate = TRUE
  /\ stabilization_offset = TRUE
  /\ rec_state = TRUE
  /\ rec_indicator = TRUE
  /\ rec_background = TRUE
  /\ rec_permission = TRUE
  /\ capture_photo = TRUE
  /\ capture_has_metadata = TRUE
  /\ capture_metadata_stripped = TRUE
  /\ capture_resolution_w = TRUE
  /\ capture_resolution_h = TRUE

\* Microseconds (matches Coq: Definition Microseconds)
Microseconds == TRUE

\* PixelData (matches Coq: Definition PixelData)
PixelData == TRUE

\* SensorData (matches Coq: Definition SensorData)
SensorData == TRUE

\* sensor_data (matches Coq: Definition sensor_data)
sensor_data(s) == TRUE

\* pixel_data (matches Coq: Definition pixel_data)
pixel_data(p) == TRUE

\* captures (matches Coq: Definition captures)
captures(s, p) == TRUE

\* frames_captured (matches Coq: Definition frames_captured)
frames_captured(v) == TRUE

\* expected_frames (matches Coq: Definition expected_frames)
expected_frames(v) == TRUE

\* well_formed_video (matches Coq: Definition well_formed_video)
well_formed_video(v) == TRUE

\* input_to_output_latency (matches Coq: Definition input_to_output_latency)
input_to_output_latency(s) == TRUE

\* low_latency_audio (matches Coq: Definition low_latency_audio)
low_latency_audio(s) == TRUE

\* lossless_capture_system (matches Coq: Definition lossless_capture_system)
lossless_capture_system == TRUE

\* well_formed_recording (matches Coq: Definition well_formed_recording)
well_formed_recording(rs) == TRUE

\* well_formed_audio (matches Coq: Definition well_formed_audio)
well_formed_audio(ac) == TRUE

\* well_formed_video_config (matches Coq: Definition well_formed_video_config)
well_formed_video_config(vc) == TRUE

\* raw_capture_lossless (matches Coq: Theorem raw_capture_lossless)
THEOREM raw_capture_lossless == Init => TypeOK

\* video_no_frame_drop (matches Coq: Theorem video_no_frame_drop)
THEOREM video_no_frame_drop == Init => TypeOK

\* audio_latency_bounded (matches Coq: Theorem audio_latency_bounded)
THEOREM audio_latency_bounded == Init => TypeOK

\* capture_preserves_identity (matches Coq: Theorem capture_preserves_identity)
THEOREM capture_preserves_identity == Init => TypeOK

\* empty_video_zero_frames (matches Coq: Theorem empty_video_zero_frames)
THEOREM empty_video_zero_frames == Init => TypeOK

\* audio_latency_nonnegative (matches Coq: Theorem audio_latency_nonnegative)
THEOREM audio_latency_nonnegative == Init => TypeOK

\* camera_access_indicator_visible (matches Coq: Theorem camera_access_indicator_visible)
THEOREM camera_access_indicator_visible == Init => TypeOK

\* microphone_access_indicator_visible (matches Coq: Theorem microphone_access_indicator_visible)
THEOREM microphone_access_indicator_visible == Init => TypeOK

\* recording_indicator_persistent (matches Coq: Theorem recording_indicator_persistent)
THEOREM recording_indicator_persistent == Init => TypeOK

\* no_silent_recording (matches Coq: Theorem no_silent_recording)
THEOREM no_silent_recording == Init => TypeOK

\* camera_preview_matches_capture (matches Coq: Theorem camera_preview_matches_capture)
THEOREM camera_preview_matches_capture == Init => TypeOK

\* audio_sample_rate_valid (matches Coq: Theorem audio_sample_rate_valid)
THEOREM audio_sample_rate_valid == Init => TypeOK

\* video_frame_rate_bounded (matches Coq: Theorem video_frame_rate_bounded)
THEOREM video_frame_rate_bounded == Init => TypeOK

\* photo_metadata_strippable (matches Coq: Theorem photo_metadata_strippable)
THEOREM photo_metadata_strippable == Init => TypeOK

\* audio_level_bounded (matches Coq: Theorem audio_level_bounded)
THEOREM audio_level_bounded == Init => TypeOK

\* camera_permission_per_session (matches Coq: Theorem camera_permission_per_session)
THEOREM camera_permission_per_session == Init => TypeOK

\* background_camera_blocked (matches Coq: Theorem background_camera_blocked)
THEOREM background_camera_blocked == Init => TypeOK

\* camera_interrupt_handled (matches Coq: Theorem camera_interrupt_handled)
THEOREM camera_interrupt_handled == Init => TypeOK

\* audio_route_change_handled (matches Coq: Theorem audio_route_change_handled)
THEOREM audio_route_change_handled == Init => TypeOK

\* video_stabilization_bounded (matches Coq: Theorem video_stabilization_bounded)
THEOREM video_stabilization_bounded == Init => TypeOK

\* capture_resolution_bounded (matches Coq: Theorem capture_resolution_bounded)
THEOREM capture_resolution_bounded == Init => TypeOK

\* Next-state relation
Next == UNCHANGED <<scene_id, scene_data, scene_timestamp, photo_id, photo_pixels, photo_metadata, photo_timestamp, video_id, video_frames, video_duration_ms, video_fps, audio_id, audio_data, audio_input_time, audio_output_time, camera_granted, mic_granted, per_session_only, indicator_visible, indicator_persistent, indicator_type, sample_rate, bit_depth, channels, audio_level, video_width, video_height, video_frame_rate, stabilization_offset, rec_state, rec_indicator, rec_background, rec_permission, capture_photo, capture_has_metadata, capture_metadata_stripped, capture_resolution_w, capture_resolution_h>>

\* Specification
Spec == Init /\ [][Next]_<<scene_id, scene_data, scene_timestamp, photo_id, photo_pixels, photo_metadata, photo_timestamp, video_id, video_frames, video_duration_ms, video_fps, audio_id, audio_data, audio_input_time, audio_output_time, camera_granted, mic_granted, per_session_only, indicator_visible, indicator_persistent, indicator_type, sample_rate, bit_depth, channels, audio_level, video_width, video_height, video_frame_rate, stabilization_offset, rec_state, rec_indicator, rec_background, rec_permission, capture_photo, capture_has_metadata, capture_metadata_stripped, capture_resolution_w, capture_resolution_h>>

====
