; Copyright (c) 2026 The RIINA Authors. All rights reserved.
; Auto-generated from 02_FORMAL/coq/domains/security_foundation/RollbackProtection.v (21 validations)
; Generated by scripts/generate-full-stack.py
;
; Translation Validation for RollbackProtection
; Layer 9: Verifies compiler backend preserves formal semantics.
; Each assertion checks source IR â‰¡ target code for a proven property.

(set-logic QF_LIA)
(set-option :produce-models true)

; IR node representation
(declare-sort IRNode 0)
(declare-sort TargetNode 0)

; version_lt: source semantics (matches Coq)
(declare-fun source_version_lt () Bool)
(declare-fun target_version_lt () Bool)
(assert (= source_version_lt target_version_lt))

; version_le: source semantics (matches Coq)
(declare-fun source_version_le () Bool)
(declare-fun target_version_le () Bool)
(assert (= source_version_le target_version_le))

; initial_rollback_state: source semantics (matches Coq)
(declare-fun source_initial_rollback_state () Bool)
(declare-fun target_initial_rollback_state () Bool)
(assert (= source_initial_rollback_state target_initial_rollback_state))

; version_allowed: source semantics (matches Coq)
(declare-fun source_version_allowed () Bool)
(declare-fun target_version_allowed () Bool)
(assert (= source_version_allowed target_version_allowed))

; can_boot_version: source semantics (matches Coq)
(declare-fun source_can_boot_version () Bool)
(declare-fun target_can_boot_version () Bool)
(assert (= source_can_boot_version target_can_boot_version))

; update_min_version: source semantics (matches Coq)
(declare-fun source_update_min_version () Bool)
(declare-fun target_update_min_version () Bool)
(assert (= source_update_min_version target_update_min_version))

; record_current_version: source semantics (matches Coq)
(declare-fun source_record_current_version () Bool)
(declare-fun target_record_current_version () Bool)
(assert (= source_record_current_version target_record_current_version))

; advance_min_to_current: source semantics (matches Coq)
(declare-fun source_advance_min_to_current () Bool)
(declare-fun target_advance_min_to_current () Bool)
(assert (= source_advance_min_to_current target_advance_min_to_current))

; is_rollback: source semantics (matches Coq)
(declare-fun source_is_rollback () Bool)
(declare-fun target_is_rollback () Bool)
(assert (= source_is_rollback target_is_rollback))

; can_boot_prop: source semantics (matches Coq)
(declare-fun source_can_boot_prop () Bool)
(declare-fun target_can_boot_prop () Bool)
(assert (= source_can_boot_prop target_can_boot_prop))

; rollback_enforced: source semantics (matches Coq)
(declare-fun source_rollback_enforced () Bool)
(declare-fun target_rollback_enforced () Bool)
(assert (= source_rollback_enforced target_rollback_enforced))

; rollback_protection: translation preserves property (matches Coq: Theorem)
(declare-fun source_rollback_protection () Bool)
(declare-fun target_rollback_protection () Bool)
(assert (= source_rollback_protection target_rollback_protection))

; old_version_cannot_boot: translation preserves property (matches Coq: Theorem)
(declare-fun source_old_version_cannot_boot () Bool)
(declare-fun target_old_version_cannot_boot () Bool)
(assert (= source_old_version_cannot_boot target_old_version_cannot_boot))

; current_or_newer_allowed: translation preserves property (matches Coq: Theorem)
(declare-fun source_current_or_newer_allowed () Bool)
(declare-fun target_current_or_newer_allowed () Bool)
(assert (= source_current_or_newer_allowed target_current_or_newer_allowed))

; min_version_monotonic: translation preserves property (matches Coq: Theorem)
(declare-fun source_min_version_monotonic () Bool)
(declare-fun target_min_version_monotonic () Bool)
(assert (= source_min_version_monotonic target_min_version_monotonic))

; no_minimum_any_allowed: translation preserves property (matches Coq: Theorem)
(declare-fun source_no_minimum_any_allowed () Bool)
(declare-fun target_no_minimum_any_allowed () Bool)
(assert (= source_no_minimum_any_allowed target_no_minimum_any_allowed))

; disabled_rollback_allows_all: translation preserves property (matches Coq: Theorem)
(declare-fun source_disabled_rollback_allows_all () Bool)
(declare-fun target_disabled_rollback_allows_all () Bool)
(assert (= source_disabled_rollback_allows_all target_disabled_rollback_allows_all))

; version_lt_irreflexive: translation preserves property (matches Coq: Theorem)
(declare-fun source_version_lt_irreflexive () Bool)
(declare-fun target_version_lt_irreflexive () Bool)
(assert (= source_version_lt_irreflexive target_version_lt_irreflexive))

; same_version_always_allowed: translation preserves property (matches Coq: Theorem)
(declare-fun source_same_version_always_allowed () Bool)
(declare-fun target_same_version_always_allowed () Bool)
(assert (= source_same_version_always_allowed target_same_version_always_allowed))

; update_stores_new_min: translation preserves property (matches Coq: Theorem)
(declare-fun source_update_stores_new_min () Bool)
(declare-fun target_update_stores_new_min () Bool)
(assert (= source_update_stores_new_min target_update_stores_new_min))

; record_preserves_anti_rollback: translation preserves property (matches Coq: Theorem)
(declare-fun source_record_preserves_anti_rollback () Bool)
(declare-fun target_record_preserves_anti_rollback () Bool)
(assert (= source_record_preserves_anti_rollback target_record_preserves_anti_rollback))

; record_preserves_minimums: translation preserves property (matches Coq: Theorem)
(declare-fun source_record_preserves_minimums () Bool)
(declare-fun target_record_preserves_minimums () Bool)
(assert (= source_record_preserves_minimums target_record_preserves_minimums))

; update_preserves_anti_rollback: translation preserves property (matches Coq: Theorem)
(declare-fun source_update_preserves_anti_rollback () Bool)
(declare-fun target_update_preserves_anti_rollback () Bool)
(assert (= source_update_preserves_anti_rollback target_update_preserves_anti_rollback))

; advance_preserves_anti_rollback: translation preserves property (matches Coq: Theorem)
(declare-fun source_advance_preserves_anti_rollback () Bool)
(declare-fun target_advance_preserves_anti_rollback () Bool)
(assert (= source_advance_preserves_anti_rollback target_advance_preserves_anti_rollback))

; equal_version_not_rollback: translation preserves property (matches Coq: Theorem)
(declare-fun source_equal_version_not_rollback () Bool)
(declare-fun target_equal_version_not_rollback () Bool)
(assert (= source_equal_version_not_rollback target_equal_version_not_rollback))

; initial_state_allows_all: translation preserves property (matches Coq: Theorem)
(declare-fun source_initial_state_allows_all () Bool)
(declare-fun target_initial_state_allows_all () Bool)
(assert (= source_initial_state_allows_all target_initial_state_allows_all))

; initial_state_no_minimums: translation preserves property (matches Coq: Theorem)
(declare-fun source_initial_state_no_minimums () Bool)
(declare-fun target_initial_state_no_minimums () Bool)
(assert (= source_initial_state_no_minimums target_initial_state_no_minimums))

; initial_state_no_current: translation preserves property (matches Coq: Theorem)
(declare-fun source_initial_state_no_current () Bool)
(declare-fun target_initial_state_no_current () Bool)
(assert (= source_initial_state_no_current target_initial_state_no_current))

; enforced_detects_rollback: translation preserves property (matches Coq: Theorem)
(declare-fun source_enforced_detects_rollback () Bool)
(declare-fun target_enforced_detects_rollback () Bool)
(assert (= source_enforced_detects_rollback target_enforced_detects_rollback))

; hardware_stored_minimum_recorded: translation preserves property (matches Coq: Theorem)
(declare-fun source_hardware_stored_minimum_recorded () Bool)
(declare-fun target_hardware_stored_minimum_recorded () Bool)
(assert (= source_hardware_stored_minimum_recorded target_hardware_stored_minimum_recorded))

; advance_missing_current_identity: translation preserves property (matches Coq: Theorem)
(declare-fun source_advance_missing_current_identity () Bool)
(declare-fun target_advance_missing_current_identity () Bool)
(assert (= source_advance_missing_current_identity target_advance_missing_current_identity))

; independent_component_minimums: translation preserves property (matches Coq: Theorem)
(declare-fun source_independent_component_minimums () Bool)
(declare-fun target_independent_component_minimums () Bool)
(assert (= source_independent_component_minimums target_independent_component_minimums))

; Verify all translation validations are satisfiable
(check-sat)
(exit)
